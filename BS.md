# Blockchain Science 
---
# Chaper4 Byzantine Agreement

## ビザンチン合意(Byzantine Agreement)
通信をより安全にする為に、研究者は飛行機に用いられる機械や様々なセンサーの起こりうる不良について研究している。<br />
不良をモデル化する際に、以下の問題に直面した。<br />
不良を起こしている機器は、ただ壊れるだけでなく、代わりに完全に停止する前に任意の振る舞いを度々見せた。<br />
任意のパターンを退けることなく、これらの識見を用いて、研究者は任意の不良として不良をモデル化する。

#### 定義4.1 ビザンチン(Byzantine) 

任意の振る舞いをするノードをビザンチンという。<br />
平文を全く送信しないこと、異なるまたは違う平文を違う隣人に送信すること、入力値に対して嘘をつくことなどのような想定可能なことが含まれる。

##### 注釈　

* ビザンチンの振る舞いは衝突も含まれる。(例　全てのビザンチンノードは同じ敵によって操作される)
* 任意の2つのノードが直接的に通信する、またはノードが不正な送信アドレスを偽造することができないことを想定している
* 非ビザンチンノードを正しいノードとする

#### 定義4.2 ビザンチン合意(Byzantine Agreement)
ビザンチンノードを用いたシステム上で定義3.1合意(consensus)内でのコンセンサスは、ビザンチンノードと呼ばれる。

##### 注釈　

* コンセンサス(定義3.1)に対しては、合意と終了、有効が必要。<br />
合意と終了は

## 4.1 有効(Validity)

#### 定義4.3 任意の入力有効

決定値は、任意ノードの入力値でなければならない。

##### 注釈

* 定義3.1でのコンセンサスを使用した有効定義である。
* ビザンチンノードの存在を確かにする定義であろうか。ビザンチンノードが入力に対して嘘をついている場合は
* 

#### 定義4.4 正しい入力有効

決定値は正しいノードの入力値でなければならない。

#### 注釈

*　不幸にも、正しい入力有効を実行することは、容易でないように思われる。プロトコルに従うビザンチンノードは入力値に対する虚偽と正しいノードの区別がつかないからである。

#### 定義4.5　全て同じ有効
全て同じ有効なノードが同じ入力vを用いて始まる場合、決定値はvでなければならない。

#### 注釈
* 決定値が二進数である場合に、正しい入力有効は全て同じ有効によって引き起こされる
* 入力値が二進数でない場合、

#### 定義4.6 中央有効(Median Validity)

---
# Chapter 5 暗号基礎(Cryptography Basis)

4.5章で扱ったように、定義2.8で紹介した状態複製は乱数化を用いて解決できた。<br />
しかしながら、暗号ツールはかなりプロトコルを簡単にするかもしれないことがわかった。<br />
この本を思い出す中で、これらの暗号を基としたプロトコルを与える前に、この章にて公開鍵暗号の簡易な紹介をする。公開鍵暗号は

## 5.1 鍵交換(Key Exchange)

あなたが一度もあったことがない場合に、公開している状況で、どうやって共有秘密鍵を認めるか。

#### 定義5.1 原始根(Primitive Root)

自然数pを素数とする。自然数gは、以下が成り立つ場合において、pの原始根である:<br />
自然数hの全てに対して、1＜=h＜pを用いて、g^{k}=h mod pのような自然数aとkがある。<br />

#### アルゴリズム 5.2 ディフィ・ヘルマン鍵交換(Deffie-Hellman Key Exchange)

入力: 素数pとpの原始根gが公開的に知られている<br />
結果: アリスとボブは共有秘密鍵を認めている<br />

1 アリスはk_Aをとる。1≦k_A≦p-2を用い、g^k_A mod pをボブに送信する<br />
2 ボブはk_Bをとる。1≦k_B≦p-2を用い、g^k_B　mod pをアリスに送信する。<br />
3 アリスは、(g^k_B)^k_A mod p = g^(k_Bk_A) mod pを計算する。<br />
4 ボブは、(g^k_A)^k_B mod p = g^(k_Ak_B) mod pを計算する。<br />
5 アリスとボブは、共有秘密鍵を有する。<br />

#### 注釈

* 以下では、kを鍵とし、mを平文、pを素数、gを原始根とし、cを暗号文(暗号化された平文)とする。<br />
一般的に、暗号化アルゴリズムは平文mに鍵kを適用することによって暗号化を行い、暗号文cをえる。
* 素数p=5と原始根g=2: 2^1 = 2 mod 5, 2^2=4 mod 5,2^3 = 3 mod 5に対する例(あまり安全ではない)をあげる。
ある



